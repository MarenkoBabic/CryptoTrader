<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Meine ASP.NET-Anwendung</title>
    @Styles.Render( "~/Content/css" )
    @Scripts.Render( "~/bundles/modernizr" )
    @Scripts.Render( "~/bundles/jquery" )
    @Scripts.Render( "~/bundles/jqueryui" )
    <script type="text/javascript">
        $(document).ready(function () {
            GetRate();
        });

        function GetRate() {
            $.ajax({ url: "/Validation/ShowRate" })
                .done(function (response) {
                    console.log("GetRate")
                    var result = "";
                    var rate_old = ($("#rate").html());
                    var rate_current = (response);

                    $("#rate").html(rate_current);

                    if (rate_current > rate_old) {
                        result = ($(".rate").html("▲"));
                        $(".rate").css("color", "green");
                        $("#rate").css("color", "green");
                    }
                    else if (rate_current < rate_old) {
                        result = ($(".rate").html("▼"));
                        $(".rate").css("color", "red");
                        $("#rate").css("color", "red");
                    }
                    else if (rate_current == rate_old) {
                        result = ($(".rate").html(""));
                        $(".rate").css("color", "goldenrod");
                        $("#rate").css("color", "goldenrod");
                    }

                    setTimeout(function () { GetRate(); }, 2000);
                });
        }
    </script>
</head>
<body>
    @{
        string firstName = "";
        if (Request.Cookies["firstName"] != null)
        {
            firstName = Request.Cookies["firstName"].Value;
        }

        string lastName = "";
        if (Request.Cookies["lastName"] != null)
        {
            lastName = Request.Cookies["lastName"].Value;
        }
    }
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <span class="btc">BTC <span class="rate"></span><span id="rate"></span></span>
        <span class="navbar-left"><img src="~/Image/bitcoin.png" /></span>
        <span class="navbar-left bitcoin glyphicon glyphicon-euro" id="rate"></span>

        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                @Html.ActionLink("CryptoTrader", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li>@Html.ActionLink("Geld buchen", "Index", "BankTransfer")</li>
                    <li>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-user">@lastName</span>
                            <span id="balance"></span>
                            <span class="glyphicon glyphicon-chevron-down"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <div class="navbar-login">
                                    <div class="row">
                                        <div class="col-lg-4">
                                            <p class="text-center">
                                                <span class="glyphicon glyphicon-user icon-size"></span>
                                            </p>
                                        </div>
                                        <div class="col-lg-8">
                                            <p class="text-left small">@firstName  @lastName</p>
                                            <p class="text-left small">@User.Identity.Name</p>
                                        </div>

                                    </div>
                                </div>
                            </li>

                            <li>
                                <div class="navbar-login navbar-login-session">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <p>
                                                @Html.ActionLink("Logout", "Logout", "Login", null, new { @class = "btn btn-danger btn-block" })
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container body-content">
        @RenderBody()



    </div>

    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)
</body>

</html>
